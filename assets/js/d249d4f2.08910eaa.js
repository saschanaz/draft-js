/*! For license information please see d249d4f2.08910eaa.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[812],{1664:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,o){for(var a,i,l=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))n.call(a,u)&&(l[u]=a[u]);if(t){i=t(a);for(var s=0;s<i.length;s++)r.call(a,i[s])&&(l[i[s]]=a[i[s]])}}return l}},3696:(e,t,n)=>{e.exports=n(4403)},4336:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>c,default:()=>g,frontMatter:()=>l,metadata:()=>u,toc:()=>y});var r=n(8168),o=n(8587),a=(n(3696),n(5680));const i=["components"],l={id:"v0-10-api-migration",title:"v0.10 API Migration"},c=void 0,u={unversionedId:"v0-10-api-migration",id:"v0-10-api-migration",title:"v0.10 API Migration",description:"The Draft.js v0.10 release includes a change to the API for managing",source:"@site/../docs/APIReference-APIMigration.md",sourceDirName:".",slug:"/v0-10-api-migration",permalink:"/docs/v0-10-api-migration",draft:!1,editUrl:"https://github.com/facebook/draft-js/edit/master/docs/../docs/APIReference-APIMigration.md",tags:[],version:"current",lastUpdatedBy:"Kagami Sascha Rosylight",lastUpdatedAt:1751380315,formattedLastUpdatedAt:"Jul 1, 2025",frontMatter:{id:"v0-10-api-migration",title:"v0.10 API Migration"},sidebar:"docs",previous:{title:"Entities",permalink:"/docs/advanced-topics-entities"},next:{title:"Decorators",permalink:"/docs/advanced-topics-decorators"}},s={},y=[{value:"Quick Overview",id:"quick-overview",level:2},{value:"Creating an Entity",id:"creating-an-entity",level:3},{value:"Getting an Entity",id:"getting-an-entity",level:3},{value:"Decorator strategy arguments change",id:"decorator-strategy-arguments-change",level:3},{value:"Decorator Strategies that find Entities",id:"decorator-strategies-that-find-entities",level:3},{value:"More Information",id:"more-information",level:2}],p={toc:y},f="wrapper";function g(e){let{components:t}=e,n=(0,o.A)(e,i);return(0,a.yg)(f,(0,r.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"The Draft.js v0.10 release includes a change to the API for managing\n",(0,a.yg)("inlineCode",{parentName:"p"},"DraftEntity")," data; the global 'DraftEntity' module is being deprecated and\n",(0,a.yg)("inlineCode",{parentName:"p"},"DraftEntity")," instances will be managed as part of ",(0,a.yg)("inlineCode",{parentName:"p"},"ContentState"),". This means\nthat the methods which were previously accessed on ",(0,a.yg)("inlineCode",{parentName:"p"},"DraftEntity")," are now moved\nto the ",(0,a.yg)("inlineCode",{parentName:"p"},"ContentState")," record."),(0,a.yg)("p",null,"The old API was set to be permanently removed in v0.11, but will now be removed in v0.12. Make sure to migrate over!"),(0,a.yg)("p",null,"This API improvement unlocks the path for many benefits that will be available in v0.12:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"DraftEntity instances and storage will be immutable."),(0,a.yg)("li",{parentName:"ul"},"DraftEntity will no longer be globally accessible."),(0,a.yg)("li",{parentName:"ul"},"Any changes to entity data will trigger a re-render.")),(0,a.yg)("h2",{id:"quick-overview"},"Quick Overview"),(0,a.yg)("p",null,"Here is a quick list of what has been changed and how to update your application:"),(0,a.yg)("h3",{id:"creating-an-entity"},"Creating an Entity"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Old Syntax")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"const entityKey = Entity.create(urlType, 'IMMUTABLE', {src: urlValue});\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"New Syntax")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"const contentStateWithEntity = contentState.createEntity(urlType, 'IMMUTABLE', {\n  src: urlValue,\n});\nconst entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n")),(0,a.yg)("h3",{id:"getting-an-entity"},"Getting an Entity"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Old Syntax")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"const entityInstance = Entity.get(entityKey);\n// entityKey is a string key associated with that entity when it was created\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"New Syntax")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"const entityInstance = contentState.getEntity(entityKey);\n// entityKey is a string key associated with that entity when it was created\n")),(0,a.yg)("h3",{id:"decorator-strategy-arguments-change"},"Decorator strategy arguments change"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Old Syntax")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"const compositeDecorator = new CompositeDecorator([\n  {\n    strategy: (contentBlock, callback) =>\n      exampleFindTextRange(contentBlock, callback),\n    component: ExampleTokenComponent,\n  },\n]);\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"New Syntax")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"const compositeDecorator = new CompositeDecorator([\n  {\n    strategy: (contentBlock, callback, contentState) => (\n      contentBlock, callback, contentState\n    ),\n    component: ExampleTokenComponent,\n  },\n]);\n")),(0,a.yg)("p",null,"Note that ExampleTokenComponent will receive contentState as a prop."),(0,a.yg)("p",null,"Why does the 'contentState' get passed into the decorator strategy now? Because we may need it if our strategy is to find certain entities in the contentBlock:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"const mutableEntityStrategy = function(contentBlock, callback, contentState) {\n  contentBlock.findEntityRanges(character => {\n    const entityKey = character.getEntity();\n    if (entityKey === null) {\n      return false;\n    }\n    // To look for certain types of entities,\n    // or entities with a certain mutability,\n    // you may need to get the entity from contentState.\n    // In this example we get only mutable entities.\n    return contentState.getEntity(entityKey).getMutability() === 'MUTABLE';\n  }, callback);\n};\n")),(0,a.yg)("h3",{id:"decorator-strategies-that-find-entities"},"Decorator Strategies that find Entities"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Old Syntax")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"function findLinkEntities(contentBlock, callback) {\n  contentBlock.findEntityRanges(character => {\n    const entityKey = character.getEntity();\n    return entityKey !== null && Entity.get(entityKey).getType() === 'LINK';\n  }, callback);\n}\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"New Syntax")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"function findLinkEntities(contentBlock, callback, contentState) {\n  contentBlock.findEntityRanges(character => {\n    const entityKey = character.getEntity();\n    return (\n      entityKey !== null &&\n      contentState.getEntity(entityKey).getType() === 'LINK'\n    );\n  }, callback);\n}\n")),(0,a.yg)("h2",{id:"more-information"},"More Information"),(0,a.yg)("p",null,"See the ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/facebook/draft-js/tree/master/examples/draft-0-10-0"},"updated examples"),"."))}g.isMDXComponent=!0},4403:(e,t,n)=>{var r=n(1664),o="function"==typeof Symbol&&Symbol.for,a=o?Symbol.for("react.element"):60103,i=o?Symbol.for("react.portal"):60106,l=o?Symbol.for("react.fragment"):60107,c=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,s=o?Symbol.for("react.provider"):60109,y=o?Symbol.for("react.context"):60110,p=o?Symbol.for("react.forward_ref"):60112,f=o?Symbol.for("react.suspense"):60113,g=o?Symbol.for("react.memo"):60115,d=o?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function k(){}function E(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=w.prototype;var S=E.prototype=new k;S.constructor=E,r(S,w.prototype),S.isPureReactComponent=!0;var O={current:null},j=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,o={},i=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,r)&&!N.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var u=Array(c),s=0;s<c;s++)u[s]=arguments[s+2];o.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:a,type:e,key:i,ref:l,props:o,_owner:O.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var P=/\/+/g,_=[];function A(e,t,n,r){if(_.length){var o=_.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function I(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>_.length&&_.push(e)}function T(e,t,n,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case i:l=!0}}if(l)return n(r,e,""===t?"."+R(e,0):t),1;if(l=0,t=""===t?".":t+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=t+R(o=e[c],c);l+=T(o,u,n,r)}else if(null===e||"object"!=typeof e?u=null:u="function"==typeof(u=m&&e[m]||e["@@iterator"])?u:null,"function"==typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,u=t+R(o,c++),n,r);else if("object"===o)throw n=""+e,Error(h(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return l}function D(e,t,n){return null==e?0:T(e,"",t,n)}function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function $(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?B(e,r,n,function(e){return e}):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+n)),r.push(e))}function B(e,t,n,r,o){var a="";null!=n&&(a=(""+n).replace(P,"$&/")+"/"),D(e,$,t=A(t,a,r,o)),I(t)}var K={current:null};function L(){var e=K.current;if(null===e)throw Error(h(321));return e}var U={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:O,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return B(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,M,t=A(null,null,t,n)),I(t)},count:function(e){return D(e,function(){return null},null)},toArray:function(e){var t=[];return B(e,t,null,function(e){return e}),t},only:function(e){if(!C(e))throw Error(h(143));return e}},t.Component=w,t.Fragment=l,t.Profiler=u,t.PureComponent=E,t.StrictMode=c,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,n){if(null==e)throw Error(h(267,e));var o=r({},e.props),i=e.key,l=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,c=O.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(s in t)j.call(t,s)&&!N.hasOwnProperty(s)&&(o[s]=void 0===t[s]&&void 0!==u?u[s]:t[s])}var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){u=Array(s);for(var y=0;y<s;y++)u[y]=arguments[y+2];o.children=u}return{$$typeof:a,type:e.type,key:i,ref:l,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:y,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:p,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return L().useCallback(e,t)},t.useContext=function(e,t){return L().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return L().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return L().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return L().useLayoutEffect(e,t)},t.useMemo=function(e,t){return L().useMemo(e,t)},t.useReducer=function(e,t,n){return L().useReducer(e,t,n)},t.useRef=function(e){return L().useRef(e)},t.useState=function(e){return L().useState(e)},t.version="16.13.1"},5680:(e,t,n)=>{n.d(t,{xA:()=>s,yg:()=>g});var r=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},y="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef(function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),y=u(n),f=o,g=y["".concat(c,".").concat(f)]||y[f]||p[f]||a;return n?r.createElement(g,i(i({ref:t},s),{},{components:n})):r.createElement(g,i({ref:t},s))});function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=f;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[y]="string"==typeof e?e:o,i[1]=l;for(var u=2;u<a;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"}}]);